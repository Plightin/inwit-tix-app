{% extends 'layout.html' %}
{% block title %}Create Organizer Account{% endblock %}
{% block content %}
    <div class="form-container">
        <h1 class="form-title">Become an Event Organizer</h1>
        <p style="text-align: center; color: #6b7280; margin-bottom: 1.5rem;">Please provide your details. Your account will be reviewed before you can create events.</p>
        <form method="post">
            <div class="form-group">
                <label for="username">Your Name or Company Name</label>
                <input type="text" name="username" id="username" required>
            </div>
            <div class="form-group">
                <label for="email">Contact Email Address</label>
                <input type="email" name="email" id="email" required>
            </div>
            <div class="form-group">
                <label for="phone_number">Contact Phone Number</label>
                <input type="tel" name="phone_number" id="phone_number" placeholder="e.g., 0977123456" required>
            </div>
            <div class="form-group">
                <label for="company_details">Company Details & Motivation</label>
                <textarea name="company_details" id="company_details" placeholder="Tell us a bit about your organization and the events you plan to host." required></textarea>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" name="password" id="password" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters">
            </div>
            <div class="form-group">
                <label for="confirm_password">Confirm Password</label>
                <input type="password" name="confirm_password" id="confirm_password" required>
            </div>
            
             <!-- Password validation checklist -->
            <div id="password-validation" class="password-reqs">
                <p>Password must contain:</p>
                <ul>
                    <li id="length" class="invalid">At least 8 characters</li>
                    <li id="lower" class="invalid">A lowercase letter</li>
                    <li id="upper" class="invalid">An uppercase letter</li>
                    <li id="number" class="invalid">A number</li>
                </ul>
            </div>

            <button type="submit" class="btn" style="margin-top: 1rem;">Submit Application</button>
        </form>
        <p class="form-text">
            Just looking to buy tickets? <a href="{{ url_for('register_buyer') }}">Sign up as an attendee</a>.
        </p>
    </div>

     <script>
        // JavaScript for real-time password validation
        const passwordInput = document.getElementById('password');
        const length = document.getElementById('length');
        const lower = document.getElementById('lower');
        const upper = document.getElementById('upper');
        const number = document.getElementById('number');

        passwordInput.onkeyup = function() {
            // Validate length
            if(passwordInput.value.length >= 8) {
                length.classList.remove("invalid");
                length.classList.add("valid");
            } else {
                length.classList.remove("valid");
                length.classList.add("invalid");
            }
            // Validate lowercase
            if(passwordInput.value.match(/[a-z]/g)) {
                lower.classList.remove("invalid");
                lower.classList.add("valid");
            } else {
                lower.classList.remove("valid");
                lower.classList.add("invalid");
            }
            // Validate uppercase
            if(passwordInput.value.match(/[A-Z]/g)) {
                upper.classList.remove("invalid");
                upper.classList.add("valid");
            } else {
                upper.classList.remove("valid");
                upper.classList.add("invalid");
            }
            // Validate numbers
            if(passwordInput.value.match(/[0-9]/g)) {
                number.classList.remove("invalid");
                number.classList.add("valid");
            } else {
                number.classList.remove("valid");
                number.classList.add("invalid");
            }
        }
    </script>
{% endblock %}
